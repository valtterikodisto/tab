(window["webpackJsonptablist-frontend"]=window["webpackJsonptablist-frontend"]||[]).push([[0],{105:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),s=a.n(c),l=a(7),i=a(1),u=a.n(i),o=a(3),m=a(6),f=a(4),p=a.n(f),d=function(){var e=window.localStorage.getItem("tabListUser");if(e){var t=JSON.parse(e);return{headers:{Authorization:"Bearer ".concat(t.token)}}}return null},b="/api/users",v=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(b,{username:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(b,d());case 2:return t=e.sent,e.abrupt("return",t.data.users);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(b,"/").concat(t),{user:a},d());case 2:return n=e.sent,e.abrupt("return",n.data.user);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(b,"/").concat(t),d());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={register:v,getAll:h,update:E,changePassword:function(){var e=Object(o.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(b,"/password/").concat(t),{oldPassword:a,newPassword:n},d());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),remove:O};function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){return{type:"SET_USER",payload:{currentUser:e}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.payload.currentUser;return j({},e,{currentUser:a});case"GET_ALL_USERS":var n=t.payload.users;return j({},e,{users:n});default:return e}};function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C={text:null,className:null},S=function(e,t){return{type:"SET_NOTIFICATION",payload:{text:e,className:t}}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":var a=t.payload,n=a.text,r=a.className;return w({},e,{text:n,className:r});case"DELETE_NOTIFICATION":return w({},e,{},C);default:return e}},L=a(19),D=a(2),M=a(10);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var B=r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"_clipPath_iMcO9LmFpPPDMvwlQ4b9tsSeF6krn8nO"},r.a.createElement("rect",{width:400,height:250}))),U=r.a.createElement("path",{d:" M 128.765 145.841 C 128.765 115.716 153.223 91.258 183.349 91.258 C 213.474 91.258 237.932 115.716 237.932 145.841 C 237.932 175.966 213.474 200.424 183.349 200.424 C 153.223 200.424 128.765 175.966 128.765 145.841 Z  M 158.91 145.841 C 158.91 132.353 169.861 121.402 183.349 121.402 C 196.837 121.402 207.787 132.353 207.787 145.841 C 207.787 159.329 196.837 170.279 183.349 170.279 C 169.861 170.279 158.91 159.329 158.91 145.841 Z ",fillRule:"evenodd",fill:"rgb(0,0,0)"}),Z=r.a.createElement("path",{d:" M 280.978 147.826 C 280.978 134.338 291.929 123.387 305.417 123.387 C 318.905 123.387 329.855 134.338 329.855 147.826 C 329.855 161.314 318.905 172.264 305.417 172.264 C 291.929 172.264 280.978 161.314 280.978 147.826 Z ",fillRule:"evenodd",fill:"rgb(0,0,0)"}),z=r.a.createElement("path",{d:" M 250.833 147.826 C 250.833 117.7 275.291 93.242 305.417 93.242 C 335.542 93.242 360 117.7 360 147.826 C 360 177.951 335.542 202.409 305.417 202.409 C 275.291 202.409 250.833 177.951 250.833 147.826 Z ",fill:"rgb(0,0,0)"}),I=r.a.createElement("path",{d:" M 297.762 163.648 L 316.16 163.648 C 317.728 163.648 319.007 162.369 319.007 160.801 L 319.007 135.844 C 319.007 135.448 318.683 135.123 318.287 135.123 L 295.654 135.123 C 295.258 135.123 294.933 135.448 294.933 135.844 L 294.933 160.819 C 294.933 162.369 296.195 163.648 297.762 163.648 L 297.762 163.648 Z  M 314.052 143.214 C 313.547 143.214 313.151 142.818 313.151 142.313 C 313.151 141.808 313.547 141.412 314.052 141.412 C 314.557 141.412 314.953 141.808 314.953 142.313 C 314.953 142.818 314.557 143.214 314.052 143.214 Z  M 314.953 149.377 C 314.953 149.881 314.557 150.278 314.052 150.278 C 313.547 150.278 313.151 149.881 313.151 149.377 C 313.151 148.872 313.547 148.476 314.052 148.476 C 314.557 148.476 314.953 148.89 314.953 149.377 Z  M 309.673 144.115 C 309.673 144.619 309.277 145.016 308.772 145.016 C 308.268 145.016 307.871 144.619 307.871 144.115 C 307.871 143.61 308.268 143.214 308.772 143.214 C 309.277 143.214 309.673 143.61 309.673 144.115 Z  M 303.493 141.412 C 302.952 141.412 302.501 140.962 302.501 140.421 C 302.501 139.88 302.952 139.43 303.493 139.43 C 304.033 139.43 304.484 139.88 304.484 140.421 C 304.484 140.962 304.051 141.412 303.493 141.412 Z  M 304.321 152.242 C 304.321 152.746 303.925 153.143 303.42 153.143 C 302.916 153.143 302.519 152.746 302.519 152.242 C 302.519 151.737 302.916 151.341 303.42 151.341 C 303.907 151.341 304.321 151.755 304.321 152.242 Z  M 300.231 143.214 C 300.231 143.719 299.835 144.115 299.33 144.115 C 298.825 144.115 298.429 143.719 298.429 143.214 C 298.429 142.709 298.825 142.313 299.33 142.313 C 299.817 142.313 300.231 142.709 300.231 143.214 Z  M 329.855 127.771 C 329.855 122.672 325.711 118.527 320.611 118.527 C 315.854 118.527 311.926 122.149 311.421 126.78 L 298.483 126.78 L 296.933 117.194 C 296.807 116.437 296.357 115.77 295.708 115.356 C 295.059 114.941 294.248 114.851 293.528 115.067 L 285.473 117.554 L 286.05 119.446 L 294.104 116.959 C 294.357 116.887 294.555 116.977 294.663 117.032 C 294.753 117.086 294.933 117.23 294.969 117.5 L 296.483 126.762 L 292.338 126.762 L 292.338 168.658 C 292.338 170.478 293.816 171.955 295.636 171.955 L 318.341 171.955 C 320.161 171.955 321.638 170.478 321.638 168.658 L 321.638 136.943 C 326.233 136.475 329.855 132.546 329.855 127.771 L 329.855 127.771 Z  M 321.062 120.347 C 322.071 120.401 323.026 120.671 323.891 121.104 L 321.062 126.077 L 321.062 120.347 L 321.062 120.347 Z  M 320.161 126.294 L 316.845 121.374 C 317.836 120.798 318.953 120.437 320.161 120.365 L 320.161 126.294 Z  M 328.053 128.096 C 328.017 129.083 327.777 130.052 327.35 130.943 L 322.323 128.204 L 328.053 128.096 Z  M 322.305 127.303 L 327.224 124.384 C 327.675 125.23 327.945 126.185 328.035 127.195 L 322.305 127.303 Z  M 326.774 123.591 L 321.854 126.51 L 324.684 121.536 C 325.494 122.095 326.215 122.78 326.774 123.591 Z  M 316.106 121.879 L 319.296 126.618 L 314.178 124.077 C 314.665 123.212 315.313 122.473 316.106 121.879 L 316.106 121.879 Z  M 313.764 124.87 L 317.602 126.78 L 313.241 126.78 C 313.331 126.113 313.511 125.483 313.764 124.87 Z  M 319.62 168.694 C 319.62 169.414 319.025 170.009 318.305 170.009 L 295.6 170.009 C 294.879 170.009 294.284 169.414 294.284 168.694 L 294.284 128.762 L 319.62 128.762 L 319.62 168.694 Z  M 321.602 130.222 L 324.143 134.312 C 323.368 134.727 322.521 135.015 321.602 135.141 L 321.602 130.222 L 321.602 130.222 Z  M 324.9 133.844 L 321.89 128.978 L 326.918 131.717 C 326.395 132.564 325.711 133.285 324.9 133.844 Z ",fill:"rgb(255,255,255)"}),V=function(e){var t=e.svgRef,a=e.title,n=A(e,["svgRef","title"]);return r.a.createElement("svg",T({style:{isolation:"isolate"},viewBox:"0 0 400 250",width:400,height:250,ref:t},n),a?r.a.createElement("title",null,a):null,B,r.a.createElement("g",{clipPath:"url(#_clipPath_iMcO9LmFpPPDMvwlQ4b9tsSeF6krn8nO)"},r.a.createElement("path",{d:"M 207.167 195.478 L 207.167 100.174 C 207.167 96.348 210.273 93.242 214.098 93.242 L 231.001 93.242 C 234.826 93.242 237.932 96.348 237.932 100.174 L 237.932 195.478 C 237.932 199.303 234.826 202.409 231.001 202.409 L 214.098 202.409 C 210.273 202.409 207.167 199.303 207.167 195.478 Z",style:{stroke:"none",fill:"#000000",strokeMiterlimit:10}}),U,r.a.createElement("path",{d:"M 249.841 195.794 L 249.841 54.206 C 249.841 50.555 252.805 47.591 256.456 47.591 L 273.992 47.591 C 277.642 47.591 280.606 50.555 280.606 54.206 L 280.606 195.794 C 280.606 199.445 277.642 202.409 273.992 202.409 L 256.456 202.409 C 252.805 202.409 249.841 199.445 249.841 195.794 Z",style:{stroke:"none",fill:"#000000",strokeMiterlimit:10}}),r.a.createElement("path",{d:"M 88.076 195.794 L 88.076 54.206 C 88.076 50.555 91.04 47.591 94.691 47.591 L 112.227 47.591 C 115.877 47.591 118.841 50.555 118.841 54.206 L 118.841 195.794 C 118.841 199.445 115.877 202.409 112.227 202.409 L 94.691 202.409 C 91.04 202.409 88.076 199.445 88.076 195.794 Z",style:{stroke:"none",fill:"#000000",strokeMiterlimit:10}}),r.a.createElement("path",{d:"M 45.989 47.591 L 160.928 47.591 C 164.234 47.591 166.917 50.275 166.917 53.58 L 166.917 72.367 C 166.917 75.673 164.234 78.356 160.928 78.356 L 45.989 78.356 C 42.684 78.356 40 75.673 40 72.367 L 40 53.58 C 40 50.275 42.684 47.591 45.989 47.591 Z",style:{stroke:"none",fill:"#000000",strokeMiterlimit:10}}),Z,z,I))},R=r.a.forwardRef((function(e,t){return r.a.createElement(V,T({svgRef:t},e))})),J=(a.p,function(e){var t=e.menuActive,a=e.toggleMenu,n=e.currentUser,c=e.logout,s=t?" is-active":"";return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(R,{width:"100",height:"62",alt:"Tab list logo"})),r.a.createElement("div",{role:"button",className:"navbar-burger burger".concat(s),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasic",onClick:a},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasic",className:"navbar-menu".concat(s)},function(){if(n&&n.admin)return r.a.createElement("div",{className:"navbar-start"},r.a.createElement(M.b,{className:"navbar-item",to:"/"},"Etusivu"),r.a.createElement(M.b,{className:"navbar-item",to:"/customers"},"Asiakkaat"),r.a.createElement(M.b,{className:"navbar-item",to:"/organizations"},"J\xe4rjest\xf6t"),r.a.createElement(M.b,{className:"navbar-item",to:"/drinks"},"Hinnasto"),r.a.createElement(M.b,{className:"navbar-item",to:"/users"},"K\xe4ytt\xe4j\xe4t"))}(),n?r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(M.b,{className:"button is-dark",to:"/profile"},r.a.createElement("strong",null,n.username)),r.a.createElement("button",{className:"button is-light",onClick:c},"Kirjaudu ulos")))):r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(M.b,{className:"button is-primary",to:"/register"},r.a.createElement("strong",null,"Rekister\xf6idy")),r.a.createElement(M.b,{className:"button is-light",to:"/login"},"Kirjaudu sis\xe4\xe4n"))))))}),F=function(e){var t=e.text,a=e.className,n=e.handleDelete;return a&&(a.includes("is-warning")||a.includes("is-danger"))||setTimeout(n,5e3),r.a.createElement("div",{className:"notification ".concat(a)},r.a.createElement("button",{className:"delete",onClick:n}),t)},_=Object(l.b)((function(e){return{currentUser:e.user.currentUser,notificationText:e.notification.text,notificationClassName:e.notification.className}}),{setUser:k,deleteNotification:function(){return{type:"DELETE_NOTIFICATION"}}})(Object(L.f)((function(e){var t=e.children,a=e.currentUser,c=e.setUser,s=e.notificationText,l=e.notificationClassName,i=e.deleteNotification,u=e.history,o=Object(n.useState)(!1),m=Object(D.a)(o,2),f=m[0],p=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{menuActive:f,toggleMenu:function(){return p(!f)},currentUser:a,logout:function(){localStorage.removeItem("tabListUser"),c(null),u.push("/login")}}),s?r.a.createElement(F,{text:s,className:l,handleDelete:function(){i()}}):null,r.a.createElement("main",null,t))}))),K=function(e){var t=e.type,a=e.text,n=e.onClick,c=e.className,s=e.style,l=e.disabled,i=t||null,u=c?"button ".concat(c):"button is-primary";return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:s,type:i,className:u,onClick:n,disabled:!!l},a))},H=function(e){var t=e.handleSubmit,a=Object(n.useState)(""),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(""),u=Object(D.a)(i,2),o=u[0],m=u[1];return r.a.createElement("div",{className:"container login-form"},r.a.createElement("form",{onSubmit:function(e){t(e,s,o,m)}},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"K\xe4ytt\xe4j\xe4nimi"),r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return l(e.target.value)},value:s}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Salasana"),r.a.createElement("input",{className:"input",type:"password",onChange:function(e){return m(e.target.value)},value:o}))),r.a.createElement(K,{type:"submit",text:"Kirjaudu"})))},q={login:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",{username:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=Object(l.b)(null,{setUser:k,setNotification:S})(Object(L.f)((function(e){var t=e.setUser,a=e.setNotification,n=e.history,c=function(){var e=Object(o.a)(u.a.mark((function e(r,c,s,l){var i,o,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),l(""),e.prev=2,e.next=5,q.login(c,s);case 5:i=e.sent,o=i.token,m=i.user,f=Y({},m,{token:o}),window.localStorage.setItem("tabListUser",JSON.stringify(f)),t(f),n.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),403===e.t0.response.status?a("Yll\xe4pit\xe4j\xe4 ei ole aktivoinut k\xe4ytt\xe4j\xe4\xe4","is-warning"):401===e.t0.response.status&&a("K\xe4ytt\xe4j\xe4nimi tai salasana v\xe4\xe4rin","is-danger");case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();return r.a.createElement(_,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content",style:{padding:"2em 0"}},r.a.createElement("h1",{className:"title is-3 is-vcentered"},"Kirjaudu sis\xe4\xe4n Tablist-tunnuksilla")),r.a.createElement(H,{handleSubmit:c})))}))),Q=a(12),X={getAll:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/organization",d());case 2:return t=e.sent,e.abrupt("return",t.data.organizations);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/organization",{name:t,maxTab:a},d());case 2:return n=e.sent,e.abrupt("return",n.data.organization);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),update:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/api/organization","/").concat(t),{organization:a},d());case 2:return n=e.sent,e.abrupt("return",n.data.organization);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),findByName:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("/api/organization","/search"),{name:t},d());case 2:return a=e.sent,e.abrupt("return",a.data.organization);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/drinks",d());case 2:return t=e.sent,e.abrupt("return",t.data.drinks);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/drinks","/page/").concat(t),d());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/drinks","/selected"),d());case 2:return t=e.sent,e.abrupt("return",t.data.drinks);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/drinks",{drink:t},d());case 2:return a=e.sent,e.abrupt("return",a.data.drink);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/api/drinks","/").concat(t),{drink:a},d());case 2:return n=e.sent,e.abrupt("return",n.data.drink);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat("/api/drinks","/").concat(t),d());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("/api/drinks","/search"),{search:t},d());case 2:return a=e.sent,e.abrupt("return",a.data.drinks);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("/api/drinks","/search"),{search:t,exact:!0},d());case 2:return a=e.sent,e.abrupt("return",a.data.drinks&&a.data.drinks.length>0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,ee({},a,{selected:!a.selected}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe={getAll:te,getPage:ae,getSelected:ne,add:re,update:ce,remove:se,search:le,checkIfExists:ie,select:ue},me=a(59),fe=a(60),pe=a(65),de=a(61),be=a(66),ve=a(62),he=a.n(ve),Ee=(a(105),function(e){function t(e){var a;return Object(me.a)(this,t),(a=Object(pe.a)(this,Object(de.a)(t).call(this,e))).getSuggestions=function(e){var t=e.trim().toLowerCase(),n=t.length;return 0===n?[]:a.props.options.filter((function(e){return a.props.mapOptionToValue(e).toLowerCase().slice(0,n)===t}))},a.onChange=function(e,t){var n=t.newValue;a.setState({value:n})},a.onSuggestionsFetchRequested=function(e){var t=e.value;a.setState({suggestions:a.getSuggestions(t)})},a.onSuggestionsClearRequested=function(){a.setState({suggestions:[]})},a.onSuggestionSelected=function(e,t){var n=t.suggestion;a.props.setValue(n)},a.onBlur=function(e,t){var n=t.highlightedSuggestion;if(n)a.props.setValue(n);else{var r=!0,c=!1,s=void 0;try{for(var l,i=a.props.options[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var u=l.value;if(a.props.mapOptionToValue(u).toLowerCase()===a.state.value.trim().toLowerCase()){a.props.setValue(u),a.setState({value:a.props.mapOptionToValue(u)});break}a.props.setValue(null)}}catch(o){c=!0,s=o}finally{try{r||null==i.return||i.return()}finally{if(c)throw s}}}},a.renderSuggestion=function(e){return r.a.createElement("div",null,a.props.mapOptionToValue(e))},a.state={value:"",suggestions:[]},a}return Object(be.a)(t,e),Object(fe.a)(t,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:this.props.placeholder,value:t,onChange:this.onChange,onBlur:this.onBlur};return r.a.createElement("div",{className:"autosuggest"},r.a.createElement(he.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.props.mapOptionToValue,renderSuggestion:this.renderSuggestion,inputProps:n,onSuggestionSelected:this.onSuggestionSelected}))}}]),t}(r.a.Component)),Oe=function(e){return(e/100).toFixed(2)},ge=function(e){if("number"===typeof e)return Math.ceil(100*e);var t=Math.round(100*parseFloat(e.replace(",",".")));return Number.isNaN(t)?null:t},ye=function(e){var t=e.customers,a=e.customer,c=e.setCustomer,s=Object(n.useState)(t),l=Object(D.a)(s,2),i=l[0],u=l[1];Object(n.useEffect)((function(){u(t)}),[t,a]);var o=function(e){return e.yearOfBirth?" ".concat(e.yearOfBirth):""};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{options:i,mapOptionToValue:function(e){return"".concat(e.firstname," ").concat(e.lastname).concat(o(e))},value:a,setValue:c,placeholder:"Asiakkaan etu- ja sukunimi"}),a?r.a.createElement("small",null,"Tili: ",Oe(a.balance),"\u20ac"):null,a&&a.block?r.a.createElement("p",{style:{color:"red"}}," Estetty"):null)},je=function(e){var t=e.children,a=e.visible,n=e.closeVisible,c=e.title,s=e.handleClose,l="modal".concat(a?" is-active":"");return r.a.createElement("div",{className:l},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},c),n?r.a.createElement("button",{className:"delete",onClick:s,"aria-label":"close"}):null),r.a.createElement("section",{className:"modal-card-body"},t)))},ke=a(63),Ne=a.n(ke);function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var we={backgroundColor:"#19323c",color:"white",border:"none",padding:"4px 16px",margin:2,borderRadius:5,fontSize:"1rem",outline:"none",cursor:"pointer"},Ce=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},we,{backgroundColor:"#f2545b"});var Se=function(e){var t=e.drink,a=e.handleAdd,c=e.handleSubstract,s=Object(n.useState)(!1),l=Object(D.a)(s,2),i=l[0],u=l[1];return r.a.createElement("div",{className:"box has-text-centered"},r.a.createElement("p",null,"".concat(t.name," ").concat(Oe(t.price),"\u20ac")," "),t.instructions?r.a.createElement("button",{className:"button is-secondary is-small",style:{margin:"1em 0"},onClick:function(){return u(!0)}},"INFO"):null,r.a.createElement("div",null,r.a.createElement("button",{style:we,onClick:function(){return a(t)}},"+"),r.a.createElement("button",{style:Ce,onClick:function(){return c(t)}},"-")),r.a.createElement(je,{title:"Ohje: ".concat(t.name),visible:i,closeVisible:!0,handleClose:function(){return u(!1)}},r.a.createElement(Ne.a,{source:t.instructions,escapeHtml:!1})))},Pe=a(22),Le=a.n(Pe),De=function(e){return Le.a.values(Le.a.groupBy(e,"id"))},Me={color:"#f2545b"};var Te=function(e){var t=e.order,a=e.total,c=e.insufficientBalance,s=Object(n.useState)(De(t)),l=Object(D.a)(s,2),i=l[0],u=l[1];return Object(n.useEffect)((function(){return u(De(t))}),[t]),r.a.createElement("div",{className:"box"},r.a.createElement("p",null,r.a.createElement("strong",{style:c()?Me:null},"Yhteens\xe4: ",Oe(a),"\u20ac")),i&&0!==i.length?r.a.createElement("div",null,i.map((function(e){var t=Array.isArray(e)?e[0].name:e.name,a=(Array.isArray(e),e.length),n=Array.isArray(e)?e[0].price:e.price,c=Array.isArray(e)?e[0].id:e.id;return r.a.createElement("p",{key:"total-".concat(c)},t," (",a,"kpl): ",Oe(n*a),"\u20ac")}))):null)},Ae=function(e,t,a){var r=Object(n.useState)(""),c=Object(D.a)(r,2),s=c[0],l=c[1],i=Object(n.useState)(""),m=Object(D.a)(i,2),f=m[0],p=m[1],d=Object(n.useState)(),b=Object(D.a)(d,2),v=b[0],h=b[1],E=function(){var e=Object(o.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(r=t(n.target.value),O(r)):a&&a(n.target.value).then((function(e){O(e)})).catch((function(e){return console.log(e)})),l(n.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e?(p(e),h({borderColor:"red"})):(p(""),h(null))};return{error:f,set:function(e){l(e),p(""),h(null)},type:e,value:s,onChange:E,style:v}},Be=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<2)){e.next=2;break}return e.abrupt("return","Nimen tulee olla v\xe4hint\xe4\xe4n 2 merkki\xe4");case 2:return e.prev=2,e.next=5,X.findByName(t);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return","Nimi on jo k\xe4yt\xf6ss\xe4");case 8:return e.abrupt("return","");case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e){var t=e.replace(",",".");return/^\d*(\.\d{0,2})?$/.test(t)?"":"Virheellinen summa"},Ze=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.checkIfExists(t);case 2:if(!e.sent){e.next=7;break}return e.abrupt("return","Nimi on jo k\xe4yt\xf6ss\xe4");case 7:if(!(t.length<1)){e.next=9;break}return e.abrupt("return","Nimen tulee olla v\xe4hint\xe4\xe4n 1 merkki");case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(e){var t=e.placeholder,a=e.attributes,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({className:"input"},a,{placeholder:t})),r.a.createElement("small",{style:{fontWeight:300,color:"red"}},n||null))},Ie={purchase:function(){var e=Object(o.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/orders",{customer:t,deposit:a,drinks:n},d());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),getCustomerOrders:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/orders","/customer/").concat(t.id,"/page/").concat(a),d());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Ve=Object(l.b)(null,{setNotification:S})((function(e){var t=e.setNotification,a=Object(n.useState)([]),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)([]),u=Object(D.a)(i,2),o=u[0],m=u[1],f=Object(n.useState)([]),p=Object(D.a)(f,2),d=p[0],b=p[1],v=Object(n.useState)(),h=Object(D.a)(v,2),E=h[0],O=h[1],g=Object(n.useState)(),y=Object(D.a)(g,2),j=y[0],k=y[1],N=Ae("text",Ue),x=N.error,w=N.set,C=Object(Q.a)(N,["error","set"]),S=Object(n.useState)([]),P=Object(D.a)(S,2),L=P[0],M=P[1],T=function(e){return M(L.concat(e))},A=function(e){var t=!1;M(L.filter((function(a){return!!t||(a.id!==e.id||(t=!0,!1))})))};Object(n.useEffect)((function(){X.getAll().then((function(e){l(e),e.length&&m(e[0].customers),e.length&&k(e[0])})),oe.getSelected().then((function(e){return b(e)}))}),[]),Object(n.useEffect)((function(){j&&m(j.customers)}),[j]);var B=function(){return L.reduce((function(e,t){return t.price+e}),0)-ge(C.value)},U=function(){return!j||!E||x||Z()||!ge(C.value)&&!B()||!(!E||E.organization===j.id)||E.block},Z=function(){return!(!E||!j)&&E.balance-B()<-j.maxTab},z=function(){k(s[0]),w(""),M([])};return r.a.createElement(_,null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title is-3"},"Lis\xe4\xe4 ostos"),r.a.createElement("label",{className:"label"},"J\xe4rjest\xf6"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},s.length&&j?r.a.createElement("select",{value:j.id,onChange:function(e){return k(function(e){var t=!0,a=!1,n=void 0;try{for(var r,c=s[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var l=r.value;if(l.id===e)return l}}catch(i){a=!0,n=i}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}}(e.target.value))}},s.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))):null))),r.a.createElement("label",{className:"label"},"Asiakkaan nimi"),r.a.createElement(ye,{customers:o,customer:E,setCustomer:O}),function(){if(d&&d.length)return r.a.createElement("div",{className:"columns is-multiline",style:{padding:"2rem 0"}},d.map((function(e){return r.a.createElement("div",{key:e.id,className:"column is-one-quarter"},r.a.createElement(Se,{drink:e,handleAdd:T,handleSubstract:A}))})))}(),r.a.createElement("label",{className:"label"},"Talletus"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ze,{attributes:C,error:x})),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"button is-static"},"\u20ac"))),r.a.createElement(Te,{order:L,total:B(),insufficientBalance:Z}),r.a.createElement(K,{text:"Tallenna ostos",onClick:function(){U()||Ie.purchase(E,C.value?ge(C.value):0,L).then((function(e){var a=e.customer;t("".concat(a.firstname," ").concat(a.lastname," tilaus (").concat(Oe(B()),"\u20ac) tallennettu"),"is-success"),m(o.map((function(e){return e.id===a.id?a:e}))),O(a),z()})).catch((function(e){t("Tilauksen tallennus ei onnistunut","is-danger"),console.log(e)}))},disabled:U()})))})),Re=function(e){var t=e.handleSubmit,a=Object(n.useState)(""),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(""),u=Object(D.a)(i,2),o=u[0],m=u[1],f=Object(n.useState)(""),p=Object(D.a)(f,2),d=p[0],b=p[1],v=d&&d!==o;return r.a.createElement("div",{className:"container register-form"},r.a.createElement("form",{onSubmit:function(e){t(e,s,o,m,d,b)}},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"K\xe4ytt\xe4j\xe4nimi"),r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return l(e.target.value)},value:s}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Salasana"),r.a.createElement("input",{className:"input",type:"password",onChange:function(e){return m(e.target.value)},value:o}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label"},"Toista salasana"),r.a.createElement("input",{className:"input",type:"password",onChange:function(e){return b(e.target.value)},value:d,style:v?{border:"2px solid red"}:null}),v?r.a.createElement("small",null,"Salasanat eiv\xe4t t\xe4sm\xe4\xe4"):null)),r.a.createElement(K,{type:"submit",text:"Rekister\xf6idy"})))},Je=Object(l.b)(null,{setNotification:S})(Object(L.f)((function(e){var t=e.setNotification,a=e.history,c=Object(n.useState)(!0),s=Object(D.a)(c,2),l=s[0],i=s[1],m=function(){var e=Object(o.a)(u.a.mark((function e(a,n,r,c,s,l){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),c(""),l(""),r===s){e.next=8;break}return t("Salasanat eiv\xe4t t\xe4sm\xe4\xe4","is-warning"),e.abrupt("return");case 8:if(r){e.next=13;break}return t("Salasana ei voi olla tyhj\xe4","is-warning"),e.abrupt("return");case 13:if(!(n.length<3)){e.next=16;break}return t("K\xe4ytt\xe4j\xe4nimen tulee olla v\xe4hint\xe4\xe4n 3 merkki\xe4","is-warning"),e.abrupt("return");case 16:return e.prev=16,e.next=19,g.register(n,r);case 19:o=e.sent,o.user,i(!1),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(16),409===e.t0.response.status?t("K\xe4ytt\xe4j\xe4nimi on jo k\xe4yt\xf6ss\xe4","is-warning"):t("K\xe4ytt\xe4j\xe4\xe4 ei voitu rekister\xf6id\xe4","is-danger");case 27:case"end":return e.stop()}}),e,null,[[16,24]])})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}();return r.a.createElement(_,null,r.a.createElement("div",{className:"container"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content",style:{padding:"2em 0"}},r.a.createElement("h1",{className:"title is-3"},"Rekister\xf6i Tablist k\xe4ytt\xe4j\xe4"),r.a.createElement("p",{className:"is-medium"},"P\xe4\xe4set k\xe4ytt\xe4m\xe4\xe4n Tablisti\xe4, kun rekister\xf6itymispyynt\xf6si hyv\xe4ksyt\xe4\xe4n.")),r.a.createElement(Re,{handleSubmit:m})):r.a.createElement("article",{className:"message is-primary",style:{padding:"5em 0"}},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"Rekister\xf6inti onnistui!")),r.a.createElement("div",{className:"message-body"},"P\xe4\xe4set kirjautumaan tilille"," ",r.a.createElement("strong",null,"kun yll\xe4pit\xe4j\xe4 on hyv\xe4ksynyt rekister\xf6itymispyynt\xf6si."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"button is-primary",onClick:function(){return a.push("/login")}},"Kirjadu sis\xe4\xe4n")))))}))),Fe=function(e){var t=e.user,a=e.handleDelete,n=e.handleAccept;return r.a.createElement("div",{className:"box is-centered"},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("strong",null,t.username)," ",r.a.createElement("small",null,t.admin?"admin":"user"))),r.a.createElement("nav",{className:"level is-mobile"},r.a.createElement("div",{className:"level-left"},r.a.createElement(K,{text:"Hyv\xe4ksy",onClick:n,className:"level-item is-primary"}),r.a.createElement(K,{text:"Hylk\xe4\xe4",onClick:a,className:"level-item is-danger"}))))))},_e=function(e){var t=e.user;return r.a.createElement("div",{className:"box"},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("strong",null,t.username)," ",r.a.createElement("small",null,t.admin?"admin":"user"))))))},Ke=function(e){var t=e.users,a=e.handleAccept,c=e.handleDelete,s=Object(n.useState)("is-active"),l=Object(D.a)(s,2),i=l[0],u=l[1],o=Object(n.useState)(null),m=Object(D.a)(o,2),f=m[0],p=m[1],d=t.filter((function(e){return e.activated}));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"tabs is-centered"},r.a.createElement("ul",null,r.a.createElement("li",{className:i,onClick:function(){i||(u("is-active"),p(null))}},r.a.createElement("a",null,"K\xe4ytt\xe4j\xe4t")),r.a.createElement("li",{className:f,onClick:function(){f||(p("is-active"),u(null))}},r.a.createElement("a",null,"Pyynn\xf6t",r.a.createElement("span",{style:{margin:"0 5px",padding:"0 5px",background:"#8c5e58",borderRadius:"5px",color:"white"}},t.length-d.length))))),i?d.map((function(e){return r.a.createElement(_e,{user:e,key:e.id})})):t.filter((function(e){return!e.activated})).map((function(e){return r.a.createElement(Fe,{user:e,handleAccept:function(){return a(e.id,e)},handleDelete:function(){return c(e.id)},key:e.id})})))};function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var qe=function(){var e=Object(n.useState)(),t=Object(D.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){g.getAll().then((function(e){return c(e)})).catch((function(e){return console.log(e.message)}))}),[]);return r.a.createElement(_,null,r.a.createElement("div",null,a?r.a.createElement(Ke,{users:a,handleAccept:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{activated:!0});g.update(e,n).then((function(t){c(a.map((function(a){return a.id===e?t:a})))}))},handleDelete:function(e){g.remove(e).then((function(){return c(a.filter((function(t){return t.id!==e})))}))}}):null))};function We(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?We(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ge=function(e){var t=e.handleSubmit,a=e.handleClose,c=e.organization,s=Ae("text",null,Be),l=s.error,i=s.set,m=Object(Q.a)(s,["error","set"]),f=Ae("text",Ue),p=f.error,d=f.set,b=Object(Q.a)(f,["error","set"]),v=l||p||!m.value||!b.value;Object(n.useEffect)((function(){c&&(i(c.name),d(Oe(c.maxTab)))}),[c]);var h=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),v||(t(Ye({},c,{name:m.value,maxTab:ge(b.value)})),E());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){i(""),d("")};return r.a.createElement("form",{onSubmit:function(e){return h(e)}},r.a.createElement("div",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"J\xe4rjest\xf6n nimi"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ze,{placeholder:"Nimi",attributes:m,error:l})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"J\xe4senen maksimivelka"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ze,{placeholder:"Maksimivelka",attributes:b,error:p})),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"button is-static"},"\u20ac")))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary",disabled:v},"Tallenna j\xe4rjest\xf6")),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"button",onClick:function(){a(),E()}},"Peruuta")))))},Qe=function(e){var t=e.organization,a=e.handleEdit;return r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("strong",null,t.name)),r.a.createElement("p",null,"Maksimivelka: ",Oe(t.maxTab),"\u20ac")),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement(K,{text:"Muokkaa",onClick:function(){return a(t)},className:"is-primary"})))},Xe=function(e){var t=e.title,a=e.buttonText,n=e.handleClick;return r.a.createElement("div",{className:"level",style:{justifyContent:"center",margin:"2em 0"}},r.a.createElement("h1",{className:"title has-text-centered",style:{marginBottom:0,marginRight:"10px"}},t),r.a.createElement(K,{style:{marginLeft:"10px"},text:a,onClick:n}))},$e=Object(l.b)(null,{setNotification:S})((function(e){var t=e.setNotification,a=Object(n.useState)(),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(!1),m=Object(D.a)(i,2),f=m[0],p=m[1],d=Object(n.useState)(null),b=Object(D.a)(d,2),v=b[0],h=b[1];Object(n.useEffect)((function(){X.getAll().then((function(e){l(e)})).catch((function(e){return console.log(e)}))}),[]);var E=function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.name,n=t.maxTab,t.id?g(t):O({name:a,maxTab:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var a=e.name,n=e.maxTab;X.add(a,n).then((function(e){l(s.concat(e)),y(),t("".concat(e.name," lis\xe4ttiin onnistuneesti!"),"is-primary")})).catch((function(e){y(),409===e.response.status?t("J\xe4rjest\xf6n nimi '".concat(a,"' on jo k\xe4yt\xf6ss\xe4"),"is-warning"):t("J\xe4rjest\xf6n ".concat(a," lis\xe4\xe4minen ei onnistunut"),"is-danger"),console.log(e)}))},g=function(e){X.update(e.id,e).then((function(a){l(s.map((function(t){return t.id===e.id?a:t}))),y(),t("".concat(e.name," p\xe4ivitettiin onnistuneesti!"),"is-primary")})).catch((function(a){t("J\xe4rjest\xf6n ".concat(e.name," p\xe4ivitt\xe4minen ei onnistunut"),"is-danger"),console.log(a)}))},y=function(){p(!1),h(null)},j=function(e){h(e),p(!0)};return r.a.createElement(_,null,r.a.createElement(je,{visible:f,footerVisible:!1,title:"J\xe4rjest\xf6n lis\xe4ys",handleClose:y},r.a.createElement(Ge,{handleSubmit:E,handleClose:y,organization:v})),r.a.createElement("div",{className:"container"},r.a.createElement(Xe,{title:"J\xe4rjest\xf6t",buttonText:"Lis\xe4\xe4 j\xe4rjest\xf6",handleClick:function(){return j(null)}}),s?s.map((function(e){return r.a.createElement(Qe,{organization:e,key:e.id,handleEdit:j})})):null))})),et={getAll:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/customers",d());case 2:return t=e.sent,e.abrupt("return",t.data.customers);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPage:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("/api/customers","/page/").concat(t),d());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),add:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/customers",{customer:t},d());case 2:return a=e.sent,e.abrupt("return",a.data.customer);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/api/customers","/").concat(t),{customer:a},d());case 2:return n=e.sent,e.abrupt("return",n.data.customer);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat("/api/customers","/").concat(t),d());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),block:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("/api/customers","/block/").concat(t),{},d());case 2:return a=e.sent,e.abrupt("return",a.data.customer);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),search:function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat("/api/customers","/search"),{search:t},d());case 2:return a=e.sent,e.abrupt("return",a.data.customers);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var at=function(e){return Le.a.values(Le.a.groupBy(e,"id"))};var nt=function(e){var t=e.orders,a=e.loadMore,c=e.hasMore,s=Object(n.useState)([]),l=Object(D.a)(s,2),i=l[0],f=l[1],p=Object(n.useState)(1),d=Object(D.a)(p,2),b=d[0],v=d[1];Object(n.useEffect)((function(){h()}),[]),Object(n.useEffect)((function(){t&&f(t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{drinks:at(e.drinks)})})))}),[t]);var h=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}return e.next=3,a(b);case 3:v(b+1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Juomat"),r.a.createElement("th",null,"Talletus"),r.a.createElement("th",null,"Yhteens\xe4"),r.a.createElement("th",null,"P\xe4iv\xe4m\xe4\xe4r\xe4"))),r.a.createElement("tbody",null,i.map((function(e){var t=new Date(e.date);return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.drinks.map((function(t){return r.a.createElement("div",{key:"".concat(e.id,"-").concat(t[0].id)},"".concat(t[0].name," (").concat(t.length,"kpl)"),r.a.createElement("br",null))}))),r.a.createElement("td",null,Oe(e.deposit),"\u20ac"),r.a.createElement("td",null,Oe(e.total),"\u20ac"),r.a.createElement("td",null,t.toLocaleTimeString("fi-FI",{dateStyle:"full",timeStyle:"short"})))})))),c?r.a.createElement(K,{text:"Lataa lis\xe4\xe4",onClick:h}):null)},rt=function(e){var t=e.customer,a=e.handleEditOpen,c=e.handleBlock,s=Object(n.useState)(!1),l=Object(D.a)(s,2),i=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(D.a)(f,2),d=p[0],b=p[1],v=Object(n.useState)(!0),h=Object(D.a)(v,2),E=h[0],O=h[1],g=Object(n.useState)([]),y=Object(D.a)(g,2),j=y[0],k=y[1],N=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("LOADING...",a),Ie.getCustomerOrders(t,a).then((function(e){k(j.concat(e.orders)),O(e.hasMore)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"has-text-centered"},t.block?r.a.createElement("div",{className:"level"},r.a.createElement("div",{className:"level-item has-text-centered"},r.a.createElement("strong",null,"Estetty"))):null,r.a.createElement("strong",{style:{paddingRight:"5px"}},t.firstname," ",t.lastname,t.yearOfBirth?" (".concat(t.yearOfBirth,")"):""),r.a.createElement("small",{style:{paddinLeft:"5px"}},t.organization.name)),r.a.createElement("div",{className:"has-text-centered",style:{margin:"10px 0"}},r.a.createElement("strong",{className:"title is-5"},Oe(t.balance),"\u20ac")),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement(K,{style:{margin:"0 5px"},text:"Muokkaa",onClick:function(){return a(t)}}),r.a.createElement(K,{style:{margin:"0 5px"},text:"Ostohistoria",onClick:function(){b(!0)}}),t.email?r.a.createElement(K,{style:{margin:"0 5px"},text:"Ota yhteytt\xe4",onClick:function(){m(!0)}}):null,t.block?r.a.createElement(K,{style:{margin:"0 5px"},text:"Poista esto",className:"is-success",onClick:function(){return c(t.id)}}):r.a.createElement(K,{style:{margin:"0 5px"},text:"Est\xe4",className:"is-danger",onClick:function(){return c(t.id)}})),r.a.createElement(je,{visible:i,closeVisible:!0,title:"".concat(t.firstname," ").concat(t.lastname),handleClose:function(){m(!1)}},r.a.createElement("p",null,"Ota yhteytt\xe4: ",t.email)),r.a.createElement(je,{visible:d,closeVisible:!0,title:"".concat(t.firstname," ").concat(t.lastname,": Ostokset"),handleClose:function(){b(!1)}},r.a.createElement(nt,{orders:j,loadMore:N,hasMore:E})))},ct=a(28),st=a.n(ct),lt=function(e){var t=e.value,a=e.handleChange,n=e.placeholder;return r.a.createElement("div",{className:"field has-addons",style:{margin:"10px 0"}},r.a.createElement("label",{className:"label",style:{margin:"5px 10px 0 0"}},"Hae:"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:n,value:t,onChange:a})))};function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot=function(e){var t,a=e.handleSubmit,c=e.handleClose,s=e.customer,l=e.organizations,i=e.handleDeleteButton,m=Object(n.useState)(""),f=Object(D.a)(m,2),p=f[0],d=f[1],b=Object(n.useState)(""),v=Object(D.a)(b,2),h=v[0],E=v[1],O=Object(n.useState)(""),g=Object(D.a)(O,2),y=g[0],j=g[1],k=Object(n.useState)(""),N=Object(D.a)(k,2),x=N[0],w=N[1],C=Object(n.useState)(""),S=Object(D.a)(C,2),P=S[0],L=S[1],M=Object(n.useState)(""),T=Object(D.a)(M,2),A=T[0],B=T[1],U=A.length>0&&(t=A,!!Number.isNaN(parseFloat(t.replace(",",".")))),Z=x&&!Number.isInteger(parseInt(x))||parseInt(x)<1900,z=P&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(P),I=function(e){return e?{borderColor:"red"}:null},V=function(e,t){return e?r.a.createElement("small",null,t):null},R=function(){return r.a.createElement("small",{style:{fontWeight:"300"}},"(valinnainen)")};Object(n.useEffect)((function(){l.length&&!p&&(d(l[0].id),B(0))}),[l]),Object(n.useEffect)((function(){s&&(d(s.organization.id),E(s.firstname),j(s.lastname),w(s.yearOfBirth?s.yearOfBirth:""),L(s.email?s.email:""),B(s.balance?Oe(s.balance):"0"))}),[s]);var J=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=!h.trim()||!y.trim()||U||Z||z||!p,console.log(n),!n){e.next=5;break}return e.abrupt("return");case 5:r=s?ut({},s,{organization:p,firstname:h,lastname:y,yearOfBirth:x,email:P,balance:ge(A)}):{organization:p,firstname:h,lastname:y,yearOfBirth:x,email:P,balance:ge(A)},_(),a(F(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){if(!e.yearOfBirth&&!e.emai){e.yearOfBirth,e.email;return Object(Q.a)(e,["yearOfBirth","email"])}if(!e.yearOfBirth){e.yearOfBirth;return Object(Q.a)(e,["yearOfBirth"])}if(!e.email){e.email;return Object(Q.a)(e,["email"])}return e},_=function(){d(l[0]&&l[0].id),E(""),j(""),w(""),L(""),B("")};return r.a.createElement("form",{onSubmit:J},r.a.createElement("label",{className:"label"},"J\xe4rjest\xf6"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select"},l.length?r.a.createElement("select",{value:p||l[0].id,onChange:function(e){return d(e.target.value)}},l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})):null):null))),r.a.createElement("label",{className:"label"},"Etunimi"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return E(e.target.value)},value:h}))),r.a.createElement("label",{className:"label"},"Sukunimi"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return j(e.target.value)},value:y}))),r.a.createElement("label",{className:"label"},"Tili"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return B(e.target.value)},value:A,style:I(U)})),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"button is-static"},"\u20ac"))),V(U,"Virheellinen luku"),r.a.createElement("label",{className:"label"},"Syntym\xe4vuosi ",R()),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return w(e.target.value)},value:x,style:I(Z)}))),V(Z,"Vuoden tulee olla v\xe4hint\xe4\xe4n 1900"),r.a.createElement("label",{className:"label"},"S\xe4hk\xf6posti ",R()),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:function(e){return L(e.target.value)},value:P,style:I(z)}))),r.a.createElement("div",null,V(z,"Virheellinen s\xe4hk\xf6posti")),r.a.createElement(K,{style:{marginRight:"5px"},type:"submit",text:"Tallenna",disabled:!p}),r.a.createElement("div",{className:"button",style:{margin:"0 5px"},onClick:function(){c(),_()}},"Peruuta"),s?r.a.createElement("div",{style:{marginLeft:"5px"},className:"button is-danger",onClick:function(){return i(s)}},"Poista"):null)},mt=function(e){var t=e.customer,a=e.handleSubmit,n=e.handleClose;return t?r.a.createElement(je,{handleClose:n,visible:!0,title:"Asiakkaan poisto"},r.a.createElement("p",null,"Olet poistamassa asiakasta ",r.a.createElement("strong",null,"".concat(t.firstname," ").concat(t.lastname))),r.a.createElement("p",null,"Poistaessasi asiakkaan, kaikki asiakkaaseen liittyv\xe4 tieto (ml. ostoshistoria)"," ",r.a.createElement("strong",null,"poistetaan pysyv\xe4sti")),r.a.createElement("br",null),r.a.createElement("strong",null,"Poistetaanko asiakas?"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(t)}},r.a.createElement(K,{style:{marginRight:"5px"},type:"submit",className:"is-danger",text:"Poista asiakas"}),r.a.createElement("div",{style:{marginLeft:"5px"},className:"button",onClick:n},"Peruuta"))):null},ft=Object(l.b)(null,{setNotification:S})((function(e){var t=e.setNotification,a=Object(n.useState)([]),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)([]),m=Object(D.a)(i,2),f=m[0],p=m[1],d=Object(n.useState)([]),b=Object(D.a)(d,2),v=b[0],h=b[1],E=Object(n.useState)(!0),O=Object(D.a)(E,2),g=O[0],y=O[1],j=Object(n.useState)(""),k=Object(D.a)(j,2),N=k[0],x=k[1],w=Object(n.useState)(!1),C=Object(D.a)(w,2),S=C[0],P=C[1],L=Object(n.useState)(!1),M=Object(D.a)(L,2),T=M[0],A=M[1],B=Object(n.useState)(!1),U=Object(D.a)(B,2),Z=U[0],z=U[1],I=Object(n.useState)(),V=Object(D.a)(I,2),R=V[0],J=V[1];Object(n.useEffect)((function(){X.getAll().then((function(e){return l(e)})).catch((function(e){return t("J\xe4rjest\xf6j\xe4 ei voitu ladata","is-danger")}))}),[]),Object(n.useEffect)((function(){N&&et.search(N).then((function(e){return h(e)})).catch((function(e){return console.log(e)}))}),[N]);var F=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et.getPage(t).then((function(e){p(f.concat(e.customers)),y(e.hasMore)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){J(e),P(!0)},H=function(){J(),P(!1)},q=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et.update(a.id,a).then((function(e){p(f.map((function(t){return t.id===e.id?e:t}))),h(v.map((function(t){return t.id===e.id?e:t}))),H(),t("Asiakkaan ".concat(e.firstname," ").concat(e.lastname," tiedot p\xe4ivitettiin onnistuneesti!"),"is-primary")})).catch((function(e){t("Asiakkaan ".concat(a.firstname," ").concat(a.lastname," tietoja ei voitu p\xe4ivitt\xe4\xe4"),"is-danger"),console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et.add(a).then((function(e){N?h(v.concat(e)):p(f.concat(e)),Y(),t("".concat(e.firstname," ").concat(e.lastname," lis\xe4ttiin onnistuneesti!"),"is-primary")})).catch((function(e){t("Asiakkaan lis\xe4ys ei onnistunut","is-danger"),console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){return A(!1)},G=function(){var e=Object(o.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et.block(a).then((function(e){p(f.map((function(t){return t.id===e.id?e:t}))),h(v.map((function(t){return t.id===e.id?e:t}))),t("".concat(e.firstname," ").concat(e.lastname,": ").concat(e.block?"estetty":"esto poistettu"),"is-primary")})).catch((function(e){t("Eston muuttaminen ep\xe4onnistui","is-danger"),console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){J(),z(!1)};return r.a.createElement(_,null,r.a.createElement("div",{className:"container"},r.a.createElement(Xe,{title:"Asiakkaat",buttonText:"Lis\xe4\xe4 asiakas",handleClick:function(){return A(!0)}}),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(lt,{value:N,placeholder:"Etsi asiakas",handleChange:function(e){x(e.target.value)}})),N?r.a.createElement("div",{className:"container"},v.map((function(e){return r.a.createElement(rt,{customer:e,key:e.id,handleEditOpen:K,handleBlock:G})}))):r.a.createElement(st.a,{pageStart:0,loadMore:F,hasMore:g},r.a.createElement("div",{className:"container"},f.map((function(e){return r.a.createElement(rt,{customer:e,key:e.id,handleEditOpen:K,handleBlock:G})})))),R?r.a.createElement(je,{visible:S,title:"".concat(R.firstname," ").concat(R.lastname),handleClose:H},r.a.createElement(ot,{handleSubmit:q,handleClose:H,customer:R,organizations:s,handleDeleteButton:function(e){P(!1),z(!0)}})):null,r.a.createElement(je,{visible:T,title:"Lis\xe4\xe4 asiakas",handleClose:Y},r.a.createElement(ot,{handleSubmit:W,handleClose:Y,organizations:s})),Z&&R?r.a.createElement(mt,{customer:R,handleSubmit:function(e){et.remove(e.id).then((function(){Q(),p(f.filter((function(t){return t.id!==e.id}))),h(v.filter((function(t){return t.id!==e.id}))),t("Asiakas poistettu","is-primary")})).catch((function(a){t("Asiakkaan ".concat(e.firstname," ").concat(e.lastname," poistaminen ei onnistunut"),"is-danger"),console.log(a)}))},handleClose:Q}):null))})),pt=(a(187),function(e){var t=e.drink,a=e.handleEditOpen,n=e.handleSelect;return r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("strong",null,t.name)),r.a.createElement("div",{className:"has-text-centered",style:{margin:"10px 0"}},r.a.createElement("strong",{className:"title is-5"},Oe(t.price),"\u20ac")),r.a.createElement("div",{className:"has-text-centered"},r.a.createElement(K,{className:"is-primary",text:"Muokkaa",style:{margin:"0 5px"},onClick:function(){return a(t)}}),t.selected?r.a.createElement(K,{className:"is-danger",text:"Poista valinta",onClick:function(){return n(t)}}):r.a.createElement(K,{className:"is-success",text:"Valitse",onClick:function(){return n(t)}})))});function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var bt=function(e){var t=e.drink,a=e.handleSubmit,c=e.handleClose,s=Ae("text",null,Ze),l=s.error,i=s.set,u=Object(Q.a)(s,["error","set"]),o=Ae("text",Ue),f=o.error,p=o.set,d=Object(Q.a)(o,["error","set"]),b=Ae("text"),v=b.error,h=b.set,E=Object(Q.a)(b,["error","set"]),O=l||f||!u.value||!d.value;Object(n.useEffect)((function(){t&&t.id&&(i(t.name),p(Oe(t.price)),h(t.instructions))}),[t]);var g=function(e){e.preventDefault(),a(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{name:u.value,price:ge(d.value),instructions:E.value})),y()},y=function(){i(""),p(""),h("")};return r.a.createElement("form",{onSubmit:function(e){return g(e)}},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Juoman nimi"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ze,{placeholder:"Nimi",attributes:u,error:l})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Juoman hinta"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement(ze,{placeholder:"Hinta",attributes:d,error:f})),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"button is-static"},"\u20ac")))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Ohjeet"),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("textarea",Object.assign({className:"textarea",placeholder:"Ohjeet"},E)),r.a.createElement("small",{style:{fontWeight:300,color:"red"}},v||null)))),r.a.createElement("button",{type:"submit",className:"button is-primary",disabled:O},"Tallenna juoma"),r.a.createElement("div",{className:"button",onClick:function(){c(),y()}},"Peruuta"))},vt=Object(l.b)(null,{setNotification:S})((function(e){var t=e.setNotification,a=Object(n.useState)([]),c=Object(D.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)([]),m=Object(D.a)(i,2),f=m[0],p=m[1],d=Object(n.useState)(!0),b=Object(D.a)(d,2),v=b[0],h=b[1],E=Object(n.useState)(),O=Object(D.a)(E,2),g=O[0],y=O[1],j=Object(n.useState)([]),k=Object(D.a)(j,2),N=k[0],x=k[1],w=Object(n.useState)(!1),C=Object(D.a)(w,2),S=C[0],P=C[1],L=Object(n.useState)(),M=Object(D.a)(L,2),T=M[0],A=M[1];Object(n.useEffect)((function(){oe.getSelected().then((function(e){return l(e)})).catch((function(e){return t("Juomia ei voitu ladata","is-danger")}))}),[]),Object(n.useEffect)((function(){g&&oe.search(g).then((function(e){return x(e)})).catch((function(e){return console.log(e)}))}),[g]);var B=function(e){e&&A(e),P(!0)},U=function(){P(!1),A(null)},Z=function(){var e=Object(o.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.id){e.next=9;break}return e.next=4,oe.update(a.id,a);case 4:n=e.sent,V(n),t("Juoma ".concat(n.name," p\xe4ivitettiin onnistuneest"),"is-primary"),e.next=14;break;case 9:return e.next=11,oe.add(a);case 11:r=e.sent,R(r),t("Juoma ".concat(r.name," lis\xe4ttiin onnistuneest"),"is-primary");case 14:U(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),t("Juoman ".concat(a.name," tallennus ep\xe4onnistui"),"is-danger");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.select(t.id,t);case 2:a=e.sent,x(N.map((function(e){return e.id===a.id?a:e}))),a.selected?l(s.concat(a)):l(s.filter((function(e){return e.id!==a.id}))),p(f.map((function(e){return e.id===a.id?a:e})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe.getPage(t).then((function(e){p(f.concat(e.drinks)),h(e.hasMore)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){l(s.map((function(t){return t.id===e.id?e:t}))),p(f.map((function(t){return t.id===e.id?e:t}))),x(N.map((function(t){return t.id===e.id?e:t})))},R=function(e){p(f.concat(e))},J=function(e){return e&&e.length>0?e.map((function(e){return r.a.createElement(pt,{key:e.id,drink:e,handleEditOpen:function(){return B(e)},handleSelect:z})})):r.a.createElement("p",{className:"has-text-centered"},"Ei juomia")};return r.a.createElement(_,null,r.a.createElement("div",{className:"container"},r.a.createElement(Xe,{title:"Hinnasto",buttonText:"Lis\xe4\xe4 juoma",handleClick:B}),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(lt,{value:g,placeholder:"Etsi juoma",handleChange:function(e){y(e.target.value)}})),N&&g?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"title is-4 has-text-centered"},"Hakutulokset"),J(N)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("h2",{className:"title is-4 has-text-centered"},"Valitut"),J(s)),r.a.createElement("h2",{className:"title is-4 has-text-centered"},"Kaikki"),r.a.createElement(st.a,{pageStart:0,loadMore:I,hasMore:v},r.a.createElement("div",{className:"container"},J(f))))),r.a.createElement(je,{title:T?"Juoman muokkaus":"Juoman lis\xe4ys",visible:S,handleClose:U},r.a.createElement(bt,{drink:T,handleSubmit:Z,handleClose:U})))}));var ht=Object(l.b)((function(e){return{currentUser:e.user.currentUser}}),{setNotification:S})((function(e){var t=e.currentUser,a=e.setNotification,c=Object(n.useState)(""),s=Object(D.a)(c,2),l=s[0],i=s[1],m=Object(n.useState)(""),f=Object(D.a)(m,2),p=f[0],d=f[1],b=Object(n.useState)(""),v=Object(D.a)(b,2),h=v[0],E=v[1],O=function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),g.changePassword(t.id,l,p).then((function(e){console.log("Changed successfully"),y(),a("Salasana vaihdettu!","is-primary")})).catch((function(e){console.log(e),y(),a("Salasananvaihto ep\xe4onnistui","is-danger")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){i(""),d(""),E("")},j={display:"flex",justifyContent:"center"},k=""!==h&&p!==h;return t?r.a.createElement(_,null,r.a.createElement("div",{className:"container has-text-centered"},r.a.createElement("h3",{className:"title is-3"},"Vaihda salasana"),r.a.createElement("form",{onSubmit:O},r.a.createElement("label",null,"Vanha salasana"),r.a.createElement("div",{className:"field has-addons",style:j},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",value:l,onChange:function(e){return i(e.target.value)}}))),r.a.createElement("label",null,"Uusi salasana"),r.a.createElement("div",{className:"field has-addons",style:j},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",value:p,onChange:function(e){return d(e.target.value)}}))),r.a.createElement("label",null,"Toista salasana"),r.a.createElement("div",{className:"field has-addons",style:j},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"password",value:h,onChange:function(e){return E(e.target.value)}}))),k?r.a.createElement("small",{style:{color:"red"}},"Salasanat eiv\xe4t t\xe4sm\xe4\xe4"):null,r.a.createElement(K,{text:"Tallenna",type:"submit"})))):null})),Et=Object(l.b)((function(e){return{currentUser:e.user.currentUser}}),{setUser:k})((function(e){var t=e.currentUser,a=e.setUser;return Object(n.useEffect)((function(){var e=window.localStorage.getItem("tabListUser");e&&a(JSON.parse(e))}),[]),r.a.createElement("div",null,r.a.createElement(M.a,null,r.a.createElement(L.b,{exact:!0,path:"/",render:function(){return t?r.a.createElement(Ve,null):r.a.createElement(L.a,{to:"/login"})}}),r.a.createElement(L.b,{path:"/login",render:function(){return t?r.a.createElement(L.a,{to:"/"}):r.a.createElement(G,null)}}),r.a.createElement(L.b,{path:"/register",render:function(){return t?r.a.createElement(L.a,{to:"/"}):r.a.createElement(Je,null)}}),r.a.createElement(L.b,{path:"/users",render:function(){return r.a.createElement(qe,null)}}),r.a.createElement(L.b,{path:"/organizations",render:function(){return r.a.createElement($e,null)}}),r.a.createElement(L.b,{path:"/customers",render:function(){return r.a.createElement(ft,null)}}),r.a.createElement(L.b,{path:"/drinks",render:function(){return r.a.createElement(vt,null)}}),r.a.createElement(L.b,{path:"/profile",render:function(){return r.a.createElement(ht,null)}})))})),Ot=a(20),gt=a(64),yt=Object(Ot.c)({user:N,notification:P}),jt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ot.d,kt=Object(Ot.e)(yt,jt(Object(Ot.a)(gt.a)));s.a.render(r.a.createElement(l.a,{store:kt},r.a.createElement(Et,null)),document.getElementById("root"))},67:function(e,t,a){e.exports=a(188)}},[[67,1,2]]]);
//# sourceMappingURL=main.b057490f.chunk.js.map